window.germanized=window.germanized||{},function(t,a){a.unit_price_observer_queue={queue:{},timeout:null,params:{},request:null,init:function(){this.params=wc_gzd_unit_price_observer_queue_params,this.queue={},this.timeout=null,this.request=null},execute:function(){var e=a.unit_price_observer_queue,r=[],c={...e.queue};e.queue={},e.timeout=null,Object.keys(c).forEach(function(e){r=r.concat([{product_id:c[e].productId,price:c[e].priceData.price,price_sale:c[e].priceData.sale_price,quantity:c[e].priceData.quantity,key:e}])}),e.request=t.ajax({type:"POST",url:e.params.wc_ajax_url.toString().replace("%%endpoint%%","gzd_refresh_unit_price"),data:{security:e.params.refresh_unit_price_nonce,products:r},success:function(n){Object.keys(c).forEach(function(e){var r=c[e],t=r.observer,i=r.priceData,u=r.priceSelector,r=r.isPrimary;t&&(n.products.hasOwnProperty(e)?(e=n.products[e],t.stopObserver(t,u),parseInt(e.product_id)===t.getCurrentProductId(t)&&e.hasOwnProperty("unit_price_html")?t.unsetUnitPriceLoading(t,i.unit_price,e.unit_price_html):t.unsetUnitPriceLoading(t,i.unit_price)):(t.stopObserver(t,u),t.unsetUnitPriceLoading(t,i.unit_price)),t.startObserver(t,u,r))}),Object.keys(n.products).forEach(function(e){c.hasOwnProperty(e)&&(e=c[e],(e=t(e.priceData.unit_price)).data("unitPriceObserver")&&e.data("unitPriceObserver"))})},error:function(){Object.keys(c).forEach(function(e){var r=c[e],t=r.observer,i=r.priceData,e=r.priceSelector,r=r.isPrimary;t&&(t.stopObserver(t,e),t.unsetUnitPriceLoading(t,i.unit_price),t.startObserver(t,e,r))})},dataType:"json"})},getQueueKey:function(e,r){return(e+r).replace(/[^a-zA-Z0-9]/g,"")},add:function(e,r,t,i,u){var n=a.unit_price_observer_queue,c=n.getQueueKey(r,i);n.queue[c]={productId:r,observer:e,priceData:t,priceSelector:i,isPrimary:u},clearTimeout(n.timeout),n.timeout=setTimeout(n.execute,500)}},t(document).ready(function(){a.unit_price_observer_queue.init()})}(jQuery,window.germanized);